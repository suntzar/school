<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Alunos - Escola Infantil</title>
    <link rel="icon" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPg0KPHN2ZyB3aWR0aD0iODAwcHgiIGhlaWdodD0iODAwcHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMyA3LjkzOTk0VjI5LjM5OTlIOVY3LjkzOTk0QzguOTk4OTYgNy42MDk3NCA5LjA3OTY5IDcuMjg0NDIgOS4yMzQ5OSA2Ljk5MzAyQzkuMzkwMjkgNi43MDE2MSA5LjYxNTMyIDYuNDUzMiA5Ljg5IDYuMjY5OTRMMTQuODkgMi45Mzk5NEMxNS4yMTg3IDIuNzIwNjYgMTUuNjA0OSAyLjYwMzY0IDE2IDIuNjAzNjRDMTYuMzk1MSAyLjYwMzY0IDE2Ljc4MTMgMi43MjA2NiAxNy4xMSAyLjkzOTk0TDIyLjExIDYuMjY5OTRDMjIuMzg0NyA2LjQ1MzIgMjIuNjA5NyA2LjcwMTYxIDIyLjc2NSA2Ljk5MzAyQzIyLjkyMDMgNy4yODQ0MiAyMy4wMDEgNy42MDk3NCAyMyA3LjkzOTk0WiIgZmlsbD0iIzJFN0QzMiIvPg0KPHBhdGggZD0iTTI3IDE1LjRIMjNWMjkuNEgyN0MyNy43OTU2IDI5LjQgMjguNTU4NyAyOS4wODQgMjkuMTIxMyAyOC41MjEzQzI5LjY4MzkgMjcuOTU4NyAzMCAyNy4xOTU3IDMwIDI2LjRWMTguNEMzMCAxNy42MDQ0IDI5LjY4MzkgMTYuODQxMyAyOS4xMjEzIDE2LjI3ODdDMjguNTU4NyAxNS43MTYxIDI3Ljc5NTYgMTUuNCAyNyAxNS40WiIgZmlsbD0iI0ZGNkYwMCIvPg0KPHBhdGggZD0iTTE4IDE3LjRIMTRDMTMuNzM0OCAxNy40IDEzLjQ4MDQgMTcuNTA1NCAxMy4yOTI5IDE3LjY5MjlDMTMuMTA1NCAxNy44ODA1IDEzIDE4LjEzNDggMTMgMTguNFYyOS40SDE1VjE5LjRIMTdWMjkuNEgxOVYxOC40QzE5IDE4LjEzNDggMTguODk0NiAxNy44ODA1IDE4LjcwNzEgMTcuNjkyOUMxOC41MTk2IDE3LjUwNTQgMTguMjY1MiAxNy40IDE4IDE3LjRaIiBmaWxsPSIjMjYzMjM4Ii8+DQo8cGF0aCBkPSJNMTggMTAuNEgxNEMxMy43MzQ4IDEwLjQgMTMuNDgwNCAxMC4yOTQ3IDEzLjI5MjkgMTAuMTA3MUMxMy4xMDU0IDkuOTE5NiAxMyA5LjY2NTI0IDEzIDkuNDAwMDJDMTMgOS4xMzQ4MSAxMy4xMDU0IDguODgwNDUgMTMuMjkyOSA4LjY5MjkyQzEzLjQ4MDQgOC41MDUzOCAxMy43MzQ4IDguNDAwMDIgMTQgOC40MDAwMkgxOEMxOC4yNjUyIDguNDAwMDIgMTguNTE5NiA4LjUwNTM4IDE4LjcwNzEgOC42OTI5MkMxOC44OTQ2IDguODgwNDUgMTkgOS4xMzQ4MSAxOSA5LjQwMDAyQzE5IDkuNjY1MjQgMTguODk0NiA5LjkxOTYgMTguNzA3MSAxMC4xMDcxQzE4LjUxOTYgMTAuMjk0NyAxOC4yNjUyIDEwLjQgMTggMTAuNFoiIGZpbGw9IiNGNUY1RjUiLz4NCjxwYXRoIGQ9Ik0xOCAxNC40SDE0QzEzLjczNDggMTQuNCAxMy40ODA0IDE0LjI5NDcgMTMuMjkyOSAxNC4xMDcxQzEzLjEwNTQgMTMuOTE5NiAxMyAxMy42NjUyIDEzIDEzLjRDMTMgMTMuMTM0OCAxMy4xMDU0IDEyLjg4MDUgMTMuMjkyOSAxMi42OTI5QzEzLjQ4MDQgMTIuNTA1NCAxMy43MzQ4IDEyLjQgMTQgMTIuNEgxOEMxOC4yNjUyIDEyLjQgMTguNTE5NiAxMi41MDU0IDE4LjcwNzEgMTIuNjkyOUMxOC44OTQ2IDEyLjg4MDUgMTkgMTMuMTM0OCAxOSAxMy40QzE5IDEzLjY2NTIgMTguODk0NiAxMy45MTk2IDE4LjcwNzEgMTQuMTA3MUMxOC41MTk2IDE0LjI5NDcgMTguMjY1MiAxNC40IDE4IDE0LjRaIiBmaWxsPSIjRjVGNUY1Ii8+DQo8cGF0aCBkPSJNMTQuOSAyLjkzOTk4TDkuOSA2LjI2OTk4QzkuNjIzNDcgNi40NTIwOSA5LjM5NjQ4IDYuNyA5LjIzOTQgNi45OTE0OEM5LjA4MjMxIDcuMjgyOTUgOS4wMDAwNSA3LjYwODg3IDkgNy45Mzk5OFYyOS40SDE2VjIuNTk5OThDMTUuNjA3OSAyLjYwMzA0IDE1LjIyNTQgMi43MjEyNyAxNC45IDIuOTM5OThaIiBmaWxsPSIjMzg4RTNDIi8+DQo8cGF0aCBkPSJNMTQgMTcuNEMxMy43MzQ4IDE3LjQgMTMuNDgwNCAxNy41MDU0IDEzLjI5MjkgMTcuNjkyOUMxMy4xMDU0IDE3Ljg4MDUgMTMgMTguMTM0OCAxMyAxOC40VjI5LjRIMTVWMTkuNEgxNlYxNy40SDE0WiIgZmlsbD0iIzM3NDc0RiIvPg0KPHBhdGggZD0iTTE0IDguNDAwMDJDMTMuNzM0OCA4LjQwMDAyIDEzLjQ4MDQgOC41MDUzOCAxMy4yOTI5IDguNjkyOTJDMTMuMTA1NCA4Ljg4MDQ1IDEzIDkuMTM0ODEgMTMgOS40MDAwMkMxMyA5LjY2NTI0IDEzLjEwNTQgOS45MTk2IDEzLjI5MjkgMTAuMTA3MUMxMy40ODA0IDEwLjI5NDcgMTMuNzM0OCAxMC40IDE0IDEwLjRIMTZWOC40MDAwMkgxNFoiIGZpbGw9IiNGNUY1RjUiLz4NCjxwYXRoIGQ9Ik0xNCAxMi40QzEzLjczNDggMTIuNCAxMy40ODA0IDEyLjUwNTQgMTMuMjkyOSAxMi42OTI5QzEzLjEwNTQgMTIuODgwNSAxMyAxMy4xMzQ4IDEzIDEzLjRDMTMgMTMuNjY1MiAxMy4xMDU0IDEzLjkxOTYgMTMuMjkyOSAxNC4xMDcxQzEzLjQ4MDQgMTQuMjk0NyAxMy43MzQ4IDE0LjQgMTQgMTQuNEgxNlYxMi40SDE0WiIgZmlsbD0iI0Y1RjVGNSIvPg0KPHBhdGggZD0iTTUgMTUuNEM0LjIwNDM1IDE1LjQgMy40NDEyOSAxNS43MTYxIDIuODc4NjggMTYuMjc4N0MyLjMxNjA3IDE2Ljg0MTMgMiAxNy42MDQ0IDIgMTguNFYyNi40QzIgMjcuMTk1NyAyLjMxNjA3IDI3Ljk1ODcgMi44Nzg2OCAyOC41MjEzQzMuNDQxMjkgMjkuMDg0IDQuMjA0MzUgMjkuNCA1IDI5LjRIOVYxNS40SDVaIiBmaWxsPSIjRjlBODI1Ii8+DQo8L3N2Zz4=">

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="styles/style.css">
</head>
<body>

    <div class="container py-4">
        <header>
            <button id="theme-switcher" title="Mudar tema">
                <i data-feather="moon" class="icon-moon"></i>
                <i data-feather="sun" class="icon-sun" style="display:none;"></i>
            </button>
            <h1>Gerenciador de Alunos</h1>
            <p>Organize e gerencie os dados dos alunos da sua escola infantil.</p>
        </header>

        <!-- Barra de Ações Principais -->
        <div class="action-bar">
            <button class="btn btn-primary" onclick="triggerFileUpload()"> <i data-feather="folder-plus"></i>Carregar Lista </button>
            <input type="file" id="jsonFileInput" accept=".json" onchange="handleFileLoad(event)">
            <button class="btn btn-success" onclick="downloadJSON()"> <i data-feather="download"></i>Baixar Lista </button>
            <button class="btn btn-info text-white" onclick="openStudentModal()"> <i data-feather="plus-circle"></i>Adicionar Aluno </button>
            <button id="print-list-btn" class="btn btn-secondary"> <i data-feather="printer"></i>Imprimir Lista </button>
        </div>

        <!-- Barra de Busca -->
        <div class="search-bar">
            <i class="feather-search"></i>
            <input type="text" id="searchInput" class="form-control" placeholder="Pesquisar por nome, CPF, mãe ou pai...">
        </div>

        <!-- Container para a lista de alunos -->
        <div id="student-list-container">
            <!-- Os cards dos alunos serão inseridos aqui pelo JavaScript -->
        </div>
        <p id="placeholder" class="text-center text-muted mt-5">
            <i data-feather="users" style="width: 3rem; height: 3rem; color: var(--secondary-pastel);"></i><br><br>
            Nenhum aluno na lista. Utilize os botões acima para carregar um arquivo ou adicionar um novo aluno.
        </p>

    </div>

    <!-- Modal para Adicionar/Editar Aluno -->
    <div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="studentModalLabel">Dados do Aluno</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="studentForm">
                        <input type="hidden" id="studentIndex">
                        <div class="mb-3"> <label for="nome" class="form-label">Nome Completo</label> <input type="text" class="form-control" id="nome" required> </div>
                        <div class="row">
                             <div class="col-md-7 mb-3"> <label for="cpf" class="form-label">CPF do Aluno</label> <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00"> </div>
                             <div class="col-md-5 mb-3"> <label for="status" class="form-label">Status</label> <select id="status" class="form-select"> <option value="Ativo" selected>Ativo</option> <option value="Transferido">Transferido</option> <option value="Inativo">Inativo</option> </select> </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-6 mb-3"> <label for="turma" class="form-label">Turma</label> <input type="text" class="form-control" id="turma" required> </div>
                            <div class="col-md-6 mb-3"> <label for="turno" class="form-label">Turno</label> <input type="text" class="form-control" id="turno"> </div>
                        </div>
                        <div class="mb-3"> <label for="nascimento" class="form-label">Data de Nascimento</label> <input type="text" class="form-control" id="nascimento" placeholder="dd/mm/aaaa"> </div>
                        <div class="mb-3"> <label for="mae" class="form-label">Nome da Mãe</label> <input type="text" class="form-control" id="mae"> </div>
                        <div class="mb-3"> <label for="pai" class="form-label">Nome do Pai</label> <input type="text" class="form-control" id="pai"> </div>
                        <div class="mb-3"> <label for="telefone" class="form-label">Telefone(s)</label> <input type="text" class="form-control" id="telefone" placeholder="Separe com vírgula: 98..., 99..."> </div>
                        <div class="mb-3"> <label for="endereco" class="form-label">Endereço</label> <input type="text" class="form-control" id="endereco"> </div>
                        <div class="mb-3"> <label for="cor" class="form-label">Cor/Raça</label> <input type="text" class="form-control" id="cor"> </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveStudent()">Salvar</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Confirmação de Exclusão -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header"> <h5 class="modal-title">Confirmar Exclusão</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> </div>
          <div class="modal-body"> <p>Você tem certeza que deseja remover este aluno? Esta ação não pode ser desfeita.</p> <p class="text-danger fw-bold" id="studentNameToDelete"></p> </div>
          <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button> <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Confirmar Exclusão</button> </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap 5.3 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Feather Icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <script src="scripts/main.js"></script>
</body>
</html>