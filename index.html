<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador Escolar - ABC Kids</title>

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Google Fonts: Poppins para títulos e Lato para corpo -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-light: #FFD1DC; /* Rosa claro */
            --primary-normal: #FF69B4; /* Rosa vibrante */
            --primary-dark: #C71585; /* Rosa escuro */
            --secondary-light: #A7DBD8; /* Azul água claro */
            --secondary-normal: #69D2E7; /* Azul água vibrante */
            --accent-light: #FFECB3; /* Amarelo claro */
            --accent-normal: #FFC107; /* Amarelo vibrante */
            --text-dark: #343a40;
            --text-muted: #6c757d;
            --bg-light: #fdfdff; /* Quase branco */
            --card-bg: #ffffff;
            --border-color: #e9ecef;
            --shadow-light: rgba(0, 0, 0, 0.05);
            --shadow-normal: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            color: var(--primary-dark);
        }

        .container {
            max-width: 1200px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--secondary-light) 100%);
            padding: 3rem 0;
            margin-bottom: 2rem;
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
            box-shadow: 0 5px 15px var(--shadow-normal);
        }

        header h1 {
            color: white;
            font-size: 3.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px var(--shadow-normal);
        }

        header p {
            color: white;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .action-bar {
            background-color: var(--card-bg);
            padding: 1.25rem;
            border-radius: 1rem;
            box-shadow: 0 5px 20px var(--shadow-light);
            margin-bottom: 2.5rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem; /* Espaçamento entre os botões */
        }

        .btn {
            font-weight: 600;
            border-radius: 0.75rem;
            padding: 0.75rem 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background-color: var(--primary-normal);
            border-color: var(--primary-normal);
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .btn-success {
            background-color: #28a745; /* Verde Bootstrap padrão */
            border-color: #28a745;
        }
        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .btn-info {
            background-color: var(--secondary-normal);
            border-color: var(--secondary-normal);
            color: white !important; /* Forçar texto branco */
        }
        .btn-info:hover {
            background-color: #5bc0de; /* Um pouco mais escuro */
            border-color: #5bc0de;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }

        .btn .feather {
            margin-right: 0.6rem;
            width: 1.1rem;
            height: 1.1rem;
        }

        #jsonFileInput {
            display: none;
        }

        .turma-title {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            padding: 1rem 1.5rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            border-radius: 0.75rem;
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            box-shadow: 0 3px 10px var(--shadow-light);
        }

        .turma-title .feather {
            margin-right: 0.75rem;
            color: var(--primary-dark);
        }

        .student-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.85rem;
            box-shadow: 0 2px 10px var(--shadow-light);
            transition: all 0.3s ease;
            margin-bottom: 1.25rem;
            overflow: hidden; /* Garante que o hover de shadow não vaze */
        }
        .student-card:hover {
            box-shadow: 0 8px 25px var(--shadow-normal);
            transform: translateY(-5px);
        }

        .student-card .card-body {
            padding: 1.5rem;
        }

        .student-card .card-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }

        .student-card .card-title .badge {
            margin-left: 0.75rem;
            font-size: 0.85rem;
            padding: 0.4em 0.7em;
            border-radius: 0.5rem;
            font-weight: 600;
        }

        .student-card .card-subtitle {
            font-size: 0.95rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .student-card hr {
            border-top: 1px solid var(--border-color);
            margin: 1rem 0;
        }

        .student-card .card-text {
            font-size: 0.98rem;
            margin-bottom: 0.6rem;
        }

        .student-card .card-text strong {
            color: var(--text-dark);
        }

        .student-card .btn-sm {
            padding: 0.45rem 0.65rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            transition: transform 0.2s ease;
        }

        .student-card .btn-sm:hover {
            transform: translateY(-1px);
        }

        /* Cores dos badges de status */
        .badge.bg-success { background-color: #28a745 !important; }
        .badge.bg-warning { background-color: #ffc107 !important; color: #343a40 !important; }
        .badge.bg-secondary { background-color: #6c757d !important; }

        #placeholder {
            font-size: 1.2rem;
            color: var(--text-muted);
            padding: 3rem;
            border: 2px dashed var(--border-color);
            border-radius: 1rem;
            margin-top: 4rem !important;
            background-color: var(--card-bg);
        }

        /* Modal styling */
        .modal-content {
            border-radius: 1rem;
            box-shadow: 0 10px 30px var(--shadow-normal);
            border: none;
        }

        .modal-header {
            background-color: var(--primary-light);
            border-top-left-radius: 1rem;
            border-top-right-radius: 1rem;
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem;
        }

        .modal-title {
            color: var(--primary-dark);
            font-weight: 700;
            font-size: 1.75rem;
        }

        .modal-body {
            padding: 2rem;
        }

        .form-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .form-control, .form-select {
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            padding: 0.75rem 1rem;
            font-size: 1rem;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--secondary-normal);
            box-shadow: 0 0 0 0.25rem rgba(105, 210, 231, 0.25); /* Sombra suave do azul água */
        }

        .modal-footer {
            border-top: 1px solid var(--border-color);
            padding: 1.25rem 2rem;
        }

        .modal-footer .btn {
            min-width: 120px;
        }

        /* Feather Icons base style */
        .feather {
            width: 1rem;
            height: 1rem;
            stroke-width: 2;
            stroke: currentColor;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }
            .action-bar {
                flex-direction: column;
                align-items: stretch;
            }
            .btn {
                width: 100%;
            }
            .turma-title {
                font-size: 1.5rem;
                padding: 0.8rem 1rem;
            }
            .student-card .card-title {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>

    <div class="container py-3">
        <header class="text-center">
            <h1 class="display-6">Gerenciador Escolar <br> <small>ABC Kids</small></h1>
            <p class="lead">Simplificando a organização de alunos para a sua escola de educação infantil.</p>
        </header>

        <!-- Barra de Ações Principais -->
        <div class="action-bar">
            <button class="btn btn-primary" onclick="triggerFileUpload()">
                <i data-feather="upload-cloud"></i>Carregar Dados
            </button>
            <input type="file" id="jsonFileInput" accept=".json" onchange="handleFileLoad(event)">
            
            <button class="btn btn-success" onclick="downloadJSON()">
                <i data-feather="download"></i>Baixar Dados
            </button>

            <button class="btn btn-info" onclick="openStudentModal()">
                <i data-feather="user-plus"></i>Adicionar Aluno
            </button>
        </div>

        <!-- Container para a lista de alunos -->
        <div id="student-list-container">
            <!-- Os cards dos alunos serão inseridos aqui pelo JavaScript -->
        </div>
        <p id="placeholder" class="text-center">
            <i data-feather="info" class="me-2"></i>Nenhum aluno na lista. <br>Carregue um arquivo JSON ou adicione um novo aluno para começar!
        </p>

    </div>

    <!-- Modal para Adicionar/Editar Aluno -->
    <div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="studentModalLabel">Dados do Aluno</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="studentForm">
                        <input type="hidden" id="studentIndex">
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome Completo do Aluno <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="nome" required>
                        </div>
                        <div class="row">
                             <div class="col-md-7 mb-3">
                                <label for="cpf" class="form-label">CPF do Aluno</label>
                                <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00">
                            </div>
                            <div class="col-md-5 mb-3">
                                <label for="status" class="form-label">Status</label>
                                <select id="status" class="form-select">
                                    <option value="Ativo" selected>Ativo</option>
                                    <option value="Transferido">Transferido</option>
                                    <option value="Inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <h5 class="mt-4 mb-3 text-muted">Informações da Turma</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="turma" class="form-label">Turma <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="turma" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="turno" class="form-label">Turno</label>
                                <input type="text" class="form-control" id="turno">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="nascimento" class="form-label">Data de Nascimento</label>
                            <input type="text" class="form-control" id="nascimento" placeholder="dd/mm/aaaa">
                        </div>
                        <h5 class="mt-4 mb-3 text-muted">Informações dos Responsáveis e Contato</h5>
                         <div class="mb-3">
                            <label for="mae" class="form-label">Nome da Mãe</label>
                            <input type="text" class="form-control" id="mae">
                        </div>
                         <div class="mb-3">
                            <label for="pai" class="form-label">Nome do Pai</label>
                            <input type="text" class="form-control" id="pai">
                        </div>
                         <div class="mb-3">
                            <label for="telefone" class="form-label">Telefone(s)</label>
                            <input type="text" class="form-control" id="telefone" placeholder="Separe com vírgula: (XX) XXXX-XXXX, (YY) YYYY-YYYY">
                        </div>
                         <div class="mb-3">
                            <label for="endereco" class="form-label">Endereço Completo</label>
                            <input type="text" class="form-control" id="endereco">
                        </div>
                        <h5 class="mt-4 mb-3 text-muted">Outras Informações</h5>
                         <div class="mb-3">
                            <label for="cor" class="form-label">Cor/Raça</label>
                            <input type="text" class="form-control" id="cor">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="saveStudent()">Salvar Aluno</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Confirmação de Exclusão -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title">Confirmar Exclusão</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Você tem certeza que deseja remover o aluno <strong class="text-danger" id="studentNameToDelete"></strong>? Esta ação não pode ser desfeita.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn"><i data-feather="trash-2"></i> Confirmar Exclusão</button>
          </div>
        </div>
      </div>
    </div>


    <!-- Bootstrap 5.3 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Feather Icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <script>
        // ===================================================================================
        // VARIÁVEIS GLOBAIS E INICIALIZAÇÃO
        // ===================================================================================
        let students = [];
        let studentModal, deleteModal;

        document.addEventListener('DOMContentLoaded', () => {
            studentModal = new bootstrap.Modal(document.getElementById('studentModal'));
            deleteModal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
            loadFromLocalStorage();
            renderStudentList();
            feather.replace(); // Inicializa os ícones Feather
        });


        // ===================================================================================
        // GERENCIAMENTO DE DADOS (LocalStorage, Upload, Download)
        // ===================================================================================

        function saveToLocalStorage() {
            try {
                localStorage.setItem('studentDatabase', JSON.stringify(students));
                console.log('Dados salvos no LocalStorage.');
            } catch (error) {
                console.error('Erro ao salvar no LocalStorage:', error);
                alert('Não foi possível salvar os dados. O armazenamento pode estar cheio ou houve um erro.');
            }
        }

        function loadFromLocalStorage() {
            const data = localStorage.getItem('studentDatabase');
            if (data) {
                try {
                    students = JSON.parse(data);
                    console.log('Dados carregados do LocalStorage.');
                } catch (error) {
                    console.error('Erro ao ler dados do LocalStorage:', error);
                    students = []; // Reseta se houver erro de parsing
                    alert('Erro ao carregar dados salvos. Formato inválido. Os dados foram resetados.');
                }
            }
        }

        function triggerFileUpload() {
            document.getElementById('jsonFileInput').click();
        }

        function handleFileLoad(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    if (Array.isArray(data)) {
                        students = data;
                        saveAndRender();
                        alert(`${students.length} alunos carregados com sucesso!`);
                    } else {
                        alert('Erro: O arquivo JSON não contém um array de alunos válido.');
                    }
                } catch (error) {
                    alert('Erro ao processar o arquivo. Verifique se é um JSON válido.');
                    console.error(error);
                }
            };
            reader.readAsText(file);
            event.target.value = null; // Limpa o input file para permitir o mesmo arquivo novamente
        }

        function downloadJSON() {
            if (students.length === 0) {
                alert('Não há dados para baixar.');
                return;
            }
            const dataStr = JSON.stringify(students, null, 4); // Formata com 4 espaços
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `alunos_abc_kids_${new Date().toISOString().slice(0,10)}.json`; // Nome com data
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url); // Libera o URL do objeto
        }

        // ===================================================================================
        // RENDERIZAÇÃO DA LISTA DE ALUNOS
        // ===================================================================================

        function getStatusBadge(status) {
            status = status || 'Ativo';
            const statusColors = {
                'Ativo': 'bg-success',
                'Transferido': 'bg-warning text-dark',
                'Inativo': 'bg-secondary',
            };
            const colorClass = statusColors[status] || 'bg-secondary'; // Fallback
            return `<span class="badge ${colorClass}">${status}</span>`;
        }

        function renderStudentList() {
            const container = document.getElementById('student-list-container');
            const placeholder = document.getElementById('placeholder');
            container.innerHTML = '';

            if (students.length === 0) {
                placeholder.style.display = 'block';
                return;
            }
            
            placeholder.style.display = 'none';

            // Agrupar e ordenar alunos por 'turma - turno'
            const groupedByTurmaTurno = students.reduce((acc, student, index) => {
                const turmaTurnoKey = `${student.turma || 'Sem Turma'} - ${student.turno || 'Sem Turno'}`;
                if (!acc[turmaTurnoKey]) acc[turmaTurnoKey] = [];
                acc[turmaTurnoKey].push({ ...student, originalIndex: index }); // Guarda o índice original
                return acc;
            }, {});

            const sortedTurmaTurnoKeys = Object.keys(groupedByTurmaTurno).sort((a, b) => {
                // Ordena por turma e depois por turno
                const [turmaA, turnoA] = a.split(' - ');
                const [turmaB, turnoB] = b.split(' - ');
                if (turmaA !== turmaB) return turmaA.localeCompare(turmaB);
                return turnoA.localeCompare(turnoB);
            });

            sortedTurmaTurnoKeys.forEach(turmaTurno => {
                const turmaTitleElement = document.createElement('h4');
                turmaTitleElement.className = 'turma-title';
                turmaTitleElement.innerHTML = `<i data-feather="grid"></i> ${turmaTurno}`;
                container.appendChild(turmaTitleElement);

                // Ordenar alunos dentro de cada grupo por nome
                groupedByTurmaTurno[turmaTurno].sort((a, b) => a.nome.localeCompare(b.nome));

                groupedByTurmaTurno[turmaTurno].forEach(student => {
                    const card = document.createElement('div');
                    card.className = 'card student-card';
                    card.innerHTML = `
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h5 class="card-title">${student.nome} ${getStatusBadge(student.status)}</h5>
                                    <h6 class="card-subtitle text-muted">CPF: ${student.cpf || 'Não informado'}</h6>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-sm btn-outline-primary" onclick="openStudentModal(${student.originalIndex})">
                                        <i data-feather="edit-2"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger" onclick="confirmDelete(${student.originalIndex})">
                                        <i data-feather="trash-2"></i>
                                    </button>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="card-text"><strong>Nascimento:</strong> ${student.nascimento || 'Não informado'}</p>
                                    <p class="card-text"><strong>Mãe:</strong> ${student.mae || 'Não informado'}</p>
                                    <p class="card-text"><strong>Pai:</strong> ${student.pai || 'Não informado'}</p>
                                </div>
                                <div class="col-md-6">
                                    <p class="card-text"><strong>Telefone:</strong> ${student.telefone && student.telefone.length ? student.telefone.join(', ') : 'Não informado'}</p>
                                    <p class="card-text"><strong>Endereço:</strong> ${student.endereco || 'Não informado'}</p>
                                    <p class="card-text"><strong>Cor/Raça:</strong> ${student.cor || 'Não informado'}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });

            feather.replace(); // Renderiza os ícones após adicionar os cards
        }


        // ===================================================================================
        // LÓGICA DO MODAL E CRUD (Create, Read, Update, Delete)
        // ===================================================================================

        function openStudentModal(index = null) {
            const form = document.getElementById('studentForm');
            form.reset(); // Limpa o formulário

            const modalTitle = document.getElementById('studentModalLabel');
            const studentIndexInput = document.getElementById('studentIndex');

            if (index !== null) {
                // Modo Edição
                modalTitle.textContent = 'Editar Dados do Aluno';
                const student = students[index];
                studentIndexInput.value = index;
                document.getElementById('nome').value = student.nome;
                document.getElementById('cpf').value = student.cpf || '';
                document.getElementById('status').value = student.status || 'Ativo';
                document.getElementById('turma').value = student.turma;
                document.getElementById('turno').value = student.turno || '';
                document.getElementById('nascimento').value = student.nascimento || '';
                document.getElementById('mae').value = student.mae || '';
                document.getElementById('pai').value = student.pai || '';
                document.getElementById('telefone').value = student.telefone ? student.telefone.join(', ') : '';
                document.getElementById('endereco').value = student.endereco || '';
                document.getElementById('cor').value = student.cor || '';
            } else {
                // Modo Adição
                modalTitle.textContent = 'Adicionar Novo Aluno';
                studentIndexInput.value = ''; // Garante que não há índice para adição
                document.getElementById('status').value = 'Ativo'; // Padrão para novos alunos
            }

            studentModal.show();
        }

        function saveStudent() {
            const index = document.getElementById('studentIndex').value;
            
            // Tratamento para telefones: string para array
            const telefones = document.getElementById('telefone').value
                .split(',')
                .map(t => t.trim())
                .filter(t => t); // Remove strings vazias

            const studentData = {
                nome: document.getElementById('nome').value.trim(), // Remove espaços em branco
                cpf: document.getElementById('cpf').value.trim(),
                status: document.getElementById('status').value,
                turma: document.getElementById('turma').value.trim(),
                turno: document.getElementById('turno').value.trim(),
                nascimento: document.getElementById('nascimento').value.trim(),
                mae: document.getElementById('mae').value.trim(),
                pai: document.getElementById('pai').value.trim(),
                telefone: telefones,
                endereco: document.getElementById('endereco').value.trim(),
                cor: document.getElementById('cor').value.trim(),
            };

            if (!studentData.nome || !studentData.turma) {
                alert('Os campos "Nome Completo do Aluno" e "Turma" são obrigatórios.');
                return;
            }

            if (index !== '') { // Se há um índice, estamos editando
                students[parseInt(index)] = studentData;
            } else { // Caso contrário, estamos adicionando
                students.push(studentData);
            }

            saveAndRender();
            studentModal.hide();
        }

        function confirmDelete(index) {
            const student = students[index];
            document.getElementById('studentNameToDelete').textContent = student.nome;
            
            // Remove e recria o event listener para evitar múltiplos listeners
            const confirmBtn = document.getElementById('confirmDeleteBtn');
            const newConfirmBtn = confirmBtn.cloneNode(true);
            confirmBtn.parentNode.replaceChild(newConfirmBtn, confirmBtn);
            
            newConfirmBtn.addEventListener('click', () => deleteStudent(index));

            deleteModal.show();
        }

        function deleteStudent(index) {
            students.splice(index, 1); // Remove 1 elemento no índice especificado
            saveAndRender();
            deleteModal.hide();
        }
        
        function saveAndRender() {
            saveToLocalStorage();
            renderStudentList();
            feather.replace(); // Garante que os ícones novos também sejam renderizados
        }
    </script>
</body>
</html>